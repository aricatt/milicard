# Location ProTable 快速测试指南

## 🚀 快速开始

### 1. 启动服务

```bash
# 终端 1：启动后端
cd server
npm run dev

# 终端 2：启动前端
cd client
npm run start:dev
```

### 2. 访问页面

```
http://localhost:8075/live-base/locations
```

---

## ✅ 5分钟快速测试

### 测试 1：列设置功能（2分钟）⭐

**操作步骤**：

1. **打开列设置**
   - 找到表格右上角的工具栏
   - 点击 ⚙️（列设置）图标
   - 应该弹出列设置面板

2. **隐藏列**
   - 取消勾选"联系人"
   - 取消勾选"联系电话"
   - 点击"确定"
   - ✅ 表格中这两列应该消失

3. **显示列**
   - 再次打开列设置
   - 勾选"描述"
   - 勾选"地址"
   - 点击"确定"
   - ✅ 表格中应该显示这两列

4. **拖拽排序**
   - 打开列设置
   - 拖拽"类型"到"位置名称"前面
   - 点击"确定"
   - ✅ 表格列顺序应该改变

5. **持久化测试**
   - 刷新页面（F5）
   - ✅ 列配置应该保持不变

**预期结果**：
- ✅ 列设置面板正常弹出
- ✅ 显示/隐藏功能正常
- ✅ 拖拽排序功能正常
- ✅ 配置持久化正常

---

### 测试 2：搜索筛选功能（1分钟）

**操作步骤**：

1. **名称搜索**
   - 在"位置名称"输入框输入"直播间"
   - 点击"查询"
   - ✅ 应该只显示名称包含"直播间"的记录

2. **类型筛选**
   - 点击"重置"清空搜索
   - 在"类型"下拉框选择"仓库"
   - 点击"查询"
   - ✅ 应该只显示仓库类型的记录

3. **状态筛选**
   - 点击"重置"清空搜索
   - 在"状态"下拉框选择"启用"
   - 点击"查询"
   - ✅ 应该只显示启用状态的记录

**预期结果**：
- ✅ 搜索功能正常
- ✅ 筛选功能正常
- ✅ 重置功能正常

---

### 测试 3：工具栏功能（1分钟）

**操作步骤**：

1. **密度调整**
   - 点击密度图标（三条横线）
   - 选择"紧凑"
   - ✅ 表格行高变小
   - 选择"宽松"
   - ✅ 表格行高变大

2. **全屏模式**
   - 点击全屏图标（⛶）
   - ✅ 表格全屏显示
   - 按 ESC 或再次点击
   - ✅ 退出全屏

3. **刷新功能**
   - 点击刷新图标（🔄）
   - ✅ 表格数据重新加载

**预期结果**：
- ✅ 密度调整正常
- ✅ 全屏模式正常
- ✅ 刷新功能正常

---

### 测试 4：CRUD 功能（1分钟）

**操作步骤**：

1. **创建位置**
   - 点击"新建位置"按钮
   - 填写表单
   - 点击"确定"
   - ✅ 创建成功，表格自动刷新

2. **编辑位置**
   - 点击某条记录的"编辑"按钮
   - 修改名称
   - 点击"确定"
   - ✅ 更新成功，表格自动刷新

3. **删除位置**
   - 点击某条记录的"删除"按钮
   - 点击"确定"
   - ✅ 删除成功，表格自动刷新

**预期结果**：
- ✅ 创建功能正常
- ✅ 编辑功能正常
- ✅ 删除功能正常

---

## 🎯 重点测试项

### 必测项目

| 序号 | 测试项 | 预期结果 | 状态 |
|------|--------|----------|------|
| 1 | 页面正常加载 | 无错误，数据正常显示 | ⬜ |
| 2 | 列设置面板打开 | 弹出设置面板 | ⬜ |
| 3 | 隐藏列 | 列正确隐藏 | ⬜ |
| 4 | 显示列 | 列正确显示 | ⬜ |
| 5 | 拖拽排序 | 列顺序正确改变 | ⬜ |
| 6 | 配置持久化 | 刷新后配置保持 | ⬜ |
| 7 | 名称搜索 | 搜索结果正确 | ⬜ |
| 8 | 类型筛选 | 筛选结果正确 | ⬜ |
| 9 | 状态筛选 | 筛选结果正确 | ⬜ |
| 10 | 密度调整 | 行高正确变化 | ⬜ |
| 11 | 全屏模式 | 正常全屏/退出 | ⬜ |
| 12 | 刷新功能 | 数据正确刷新 | ⬜ |
| 13 | 创建位置 | 创建成功 | ⬜ |
| 14 | 编辑位置 | 更新成功 | ⬜ |
| 15 | 删除位置 | 删除成功 | ⬜ |

---

## 🐛 问题报告模板

如果发现问题，请按以下格式记录：

```markdown
### 问题 X：[简短描述]

**重现步骤**：
1. 步骤1
2. 步骤2
3. 步骤3

**预期结果**：
应该发生什么

**实际结果**：
实际发生了什么

**截图**：
[如果有的话]

**浏览器**：
Chrome / Edge / Firefox / Safari

**控制台错误**：
[如果有的话]

**优先级**：
高 / 中 / 低
```

---

## 📊 测试结果记录

### 测试环境

- **测试日期**：2025-11-25
- **测试人员**：___________
- **浏览器**：___________
- **操作系统**：___________

### 测试结果

- [ ] ✅ 所有功能正常
- [ ] ⚠️ 有小问题，不影响使用
- [ ] ❌ 有严重问题，需要修复

### 问题列表

1. ___________
2. ___________
3. ___________

### 测试结论

___________

---

## 🎨 视觉检查清单

### 布局

- [ ] 统计卡片正确显示
- [ ] 表格宽度合适
- [ ] 列宽合理
- [ ] 固定列正常工作

### 样式

- [ ] 按钮样式正常
- [ ] 标签颜色正确
- [ ] 图标显示正常
- [ ] 间距合理

### 响应式

- [ ] 桌面端正常
- [ ] 小屏幕下可横向滚动
- [ ] 工具栏在小屏幕下正常

---

## 💡 测试技巧

### 1. 清除缓存测试

```javascript
// 在浏览器控制台执行
localStorage.removeItem('location-table-columns');
location.reload();
```

### 2. 查看持久化配置

```javascript
// 在浏览器控制台执行
console.log(localStorage.getItem('location-table-columns'));
```

### 3. 模拟大数据量

- 创建多条测试数据
- 测试分页性能
- 测试搜索性能

### 4. 测试边界情况

- 空数据
- 单条数据
- 100+ 条数据
- 超长文本

---

## 🔄 回滚测试

如果需要对比新旧版本：

### 1. 查看旧版本

```bash
cd client
Copy-Item "src\pages\live-base\locations\index.tsx.backup" "src\pages\live-base\locations\index-old.tsx"
```

### 2. 对比功能

| 功能 | 旧版本 | 新版本 |
|------|--------|--------|
| 列设置 | ❌ | ✅ |
| 搜索 | ✅ | ✅ |
| 筛选 | ✅ | ✅ |
| 密度调整 | ✅ | ✅ |
| 全屏 | ❌ | ✅ |

---

## 📞 支持

如有问题，请：

1. 检查浏览器控制台错误
2. 查看 `FEATURE_LOCATION_PROTABLE.md` 文档
3. 联系开发团队

---

**测试完成后，请将此文档连同测试结果一起提交！**

✅ 祝测试顺利！
