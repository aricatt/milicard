# 模块：主播利润核算

- **参考截图**: `10_主播利润.png`
- **URL**: `/live-base/finance/anchor-profit`

---

## 1. 功能概述

此页面用于核算并展示每个主播在特定日期的利润情况。它是评估主播表现和进行财务结算的核心报表。

---

## 2. 页面布局与功能

### 2.1 搜索与操作

- **搜索**: 
  - 页面顶部提供按“主播”和“日期范围”进行筛选的功能。
  - 点击“搜索” (Search) 按钮后，下方列表根据条件进行过滤。
- **主要操作**:
  - **添加 (Add)**: 点击跳转到“添加利润核算”页面，用于录入单日利润数据。
  - **刷新 (Refresh)**: 重新加载列表数据。
  - **导入 (Import)**: 批量导入利润数据。
  - **导出 (Export)**: 导出利润报表。

### 2.2 利润列表

- **数据展示**: 页面主体为一个表格，展示每日的主播利润核算详情。
- **分页**: 表格下方应有分页组件。
- **表格列**:
  - **ID**: 唯一标识符。
  - **日期**: 核算的日期。
  - **主播**: 关联的主播。
  - **GMV金额**: 商品交易总额。
  - **退款金额**: 当日发生的退款总额。
  - **走水金额**: 指未通过平台，线下交易的金额。
  - **当日销售额**: 当日的实际销售净额。
  - **佣金金额**: 主播获得的佣金总额。
  - **投流金额**: 为该主播或直播间投入的广告或流量费用。
  - **平台扣点金额**: 电商平台收取的费用。
  - **利润金额**: 当日的最终利润。
  - **毛利率%**: 利润占销售额的百分比。
  - **创建时间**: 记录的创建日期和时间。
  - **操作**:
    - **编辑 (Edit)**: 点击后，跳转到对应的编辑页面。
    - **删除 (Del)**: 点击后，应弹出确认对话框，确认后删除该记录。

---

## 3. 数据模型与计算逻辑

```typescript
// file: src/models/anchorProfit.ts

export interface AnchorProfitRecord {
  id: number;
  date: string;
  anchorId: number;

  // 基础数据 (可能为手动录入)
  gmv: number;
  refundAmount: number;
  failedAmount: number; // 走水金额
  commissionAmount: number;
  advertisingSpend: number; // 投流金额
  platformFee: number; // 平台扣点

  // 计算数据
  netSales: number; // 当日销售额
  profit: number; // 利润金额
  grossMargin: number; // 毛利率

  createdAt: string;
}
```

---

## 4. 已确认的业务规则

1.  **“走水金额”**: 指未通过平台，线下交易的金额。
2.  **数据来源**: `GMV金额`, `退款金额`, `走水金额`, `投流金额` 均为用户手动录入项。
3.  **计算公式**:
    - `当日销售额` = `GMV金额` + `走水金额` - `退款金额`
    - `平台扣点` = (`GMV金额` - `退款金额`) * `平台扣点比例`
    - `利润金额` = `当日销售额` - `实际消耗货值` - `投流费用` - `平台扣点`
    - `毛利率` = `利润金额` / `当日销售额` * 100%
    - `实际消耗货值` 是从“库存及消耗”模块自动计算并同步过来的。
